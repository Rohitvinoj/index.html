<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Previous head content remains same -->
    <style>
        /* Add these new styles */
        #chat-sidebar {
            position: fixed;
            right: 0;
            top: 0;
            width: 300px;
            height: 100vh;
            background: rgba(0, 0, 0, 0.9);
            border-left: 2px solid #00ff00;
            padding: 20px;
            overflow-y: auto;
        }

        .message {
            margin: 10px 0;
            padding: 5px;
            border-bottom: 1px dashed #00ff0033;
        }

        #message-input {
            background: black;
            color: #00ff00;
            border: 1px solid #00ff00;
            padding: 5px;
            width: 100%;
            margin-top: 10px;
        }

        .user-id {
            color: #00ffff;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <!-- Previous body content remains same -->
    
    <!-- Add Chat Sidebar -->
    <div id="chat-sidebar">
        <h3>SECURE CHANNEL [LOCAL]</h3>
        <div id="messages"></div>
        <input type="text" id="message-input" placeholder="> ENTER MESSAGE...">
    </div>

    <script>
        // User Management
        let userId = localStorage.getItem('userId');
        if (!userId) {
            userId = 'USER-' + Math.random().toString(36).substr(2, 6).toUpperCase();
            localStorage.setItem('userId', userId);
        }

        // Show user ID in main content
        const finalMessage = document.getElementById('final-message');
        finalMessage.innerHTML += `<br>Your Security ID: <span class="user-id">${userId}</span>`;

        // Chat System
        const messagesDiv = document.getElementById('messages');
        const messageInput = document.getElementById('message-input');

        // Load messages from localStorage
        let messages = JSON.parse(localStorage.getItem('messages')) || [];
        function renderMessages() {
            messagesDiv.innerHTML = messages.map(msg => `
                <div class="message">
                    <span class="user-id">${msg.userId}:</span>
                    ${msg.text}
                </div>
            `).join('');
        }

        // Send message
        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && messageInput.value.trim() !== '') {
                messages.push({
                    text: messageInput.value,
                    userId: userId,
                    timestamp: new Date().toLocaleTimeString()
                });

                // Save to localStorage
                localStorage.setItem('messages', JSON.stringify(messages));

                // Render messages
                renderMessages();
                messageInput.value = '';
            }
        });

        // Initial render
        renderMessages();

        // Previous JavaScript code remains same
    </script>
</body>
</html>
